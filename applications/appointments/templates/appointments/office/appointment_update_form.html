{% extends 'base/base_panel_office.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block head %}
    <title>Fizjo-System - Edytuj Wizytę</title>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <!-- XDSoft DateTimePicker -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css"
          integrity="sha256-DOS9W6NR+NFe1fUhEE0PGKY/fubbUCnOfTje2JMDw3Y=" crossorigin="anonymous"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"
            integrity="sha256-FEqEelWI3WouFOo2VWP/uJfs1y8KJ++FLh2Lbqc8SJk=" crossorigin="anonymous"></script>
{% endblock head %}
{% block content %}
    <div class="container border rounded bg-light">
        <div class="form">
            <h2>Edytuj wizytę dla pacjenta: {{ appointment.first_name }} {{ appointment.last_name }}</h2>
            <hr>
            <form method="post" novalidate>
                {% csrf_token %}
                {{ form|crispy }}
                <button type="submit" class="btn btn-success">Zapisz zmiany</button>
                {% if previous_url %}
                    <a href="{{ previous_url }}" class="btn btn-outline-secondary" role="button">Powrót</a>
                {% else %}
                    <a href="{% url 'office_panel:appointments:list' %}" class="btn btn-outline-secondary"
                       role="button">Powrót
                    </a>
                {% endif %}
            </form>
            <hr>
        </div>
    </div>
    <script>
        let opening_hours = {
            Monday: ["{{ opening_hours.monday.0 }}", "{{ opening_hours.monday.1 }}"],
            Tuesday: ["{{ opening_hours.tuesday.0 }}", "{{ opening_hours.tuesday.1 }}"],
            Wednesday: ["{{ opening_hours.wednesday.0 }}", "{{ opening_hours.wednesday.1 }}"],
            Thursday: ["{{ opening_hours.thursday.0 }}", "{{ opening_hours.thursday.1 }}"],
            Friday: ["{{ opening_hours.friday.0 }}", "{{ opening_hours.friday.1 }}"],
            Saturday: ["{{ opening_hours.saturday.0 }}", "{{ opening_hours.saturday.1 }}"],
            Sunday: ["{{ opening_hours.sunday.0 }}", "{{ opening_hours.sunday.1 }}"],
        }
    </script>
    <script src="{% static 'js/datetime_picker.js' %}"></script>
{% endblock content %}